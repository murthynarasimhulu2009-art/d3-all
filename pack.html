<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Circle Packing</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body { font-family: sans-serif; }
  .title { text-align: center; margin-top: 10px; font-size: 24px; }
  .tooltip { position: absolute; background: #fff; padding: 4px 8px; border: 1px solid #ccc; pointer-events: none; font-size: 12px; }
</style>
</head>
<body>
<div class="title">Circle Packing</div>
<svg id="pack" width="800" height="400"></svg>

<script>
// Inline data
const data = {
  name: "root",
  children: [
    {
      name: "Category A",
      children: [
        { name: "Item 1", value: 234 },
        { name: "Item 2", value: 456 },
        { name: "Item 3", value: 123 },
        { name: "Item 4", value: 345 },
        { name: "Item 5", value: 567 }
      ]
    },
    {
      name: "Category B",
      children: [
        { name: "Item 6", value: 789 },
        { name: "Item 7", value: 234 },
        { name: "Item 8", value: 456 },
        { name: "Item 9", value: 123 },
        { name: "Item 10", value: 345 }
      ]
    }
  ]
};

// Create hierarchy and compute pack layout
const root = d3.hierarchy(data)
  .sum(d => d.value)
  .sort((a,b) => b.value - a.value);

const pack = d3.pack()
  .size([700, 350])
  .padding(3);

pack(root);

// Scales
const color = d3.scaleOrdinal()
  .domain([0,1,2])
  .range(d3.schemePastel1);

// SVG container
const svg = d3.select("#pack")
  .attr("viewBox", `0 0 800 400`);

const group = svg.append("g")
  .attr("transform", "translate(50,25)"); // center pack within margins

// Draw circles
group.selectAll("circle")
  .data(root.descendants())
  .join("circle")
    .attr("cx", d => d.x)
    .attr("cy", d => d.y)
    .attr("r", d => d.r)
    .attr("fill", d => d.depth === 0 ? "none" : color(d.depth))
    .attr("stroke", "white")
    .attr("opacity", 0.8);

// Optional tooltip
const tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

group.selectAll("circle")
  .on("mouseover", (event,d) => {
    tooltip.style("opacity", 1)
      .html(d.data.name + (d.value ? `: ${d.value}` : ""))
      .style("left", (event.pageX + 5) + "px")
      .style("top", (event.pageY - 28) + "px");
  })
  .on("mousemove", (event) => {
    tooltip.style("left", (event.pageX + 5) + "px")
           .style("top", (event.pageY - 28) + "px");
  })
  .on("mouseout", () => tooltip.style("opacity", 0));
</script>
</body>
</html>