<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Q-Q Plot</title>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<style>
  body { font-family: sans-serif; }
  .axis path,
  .axis line {
    stroke: #000;
    shape-rendering: crispEdges;
  }
  .title {
    text-anchor: middle;
    font-size: 16px;
    font-weight: bold;
  }
</style>
</head>
<body>
<svg id="qq-plot" width="400" height="400"></svg>
<script>
const data = [
  {"sample1":23.5,"sample2":67.2,"quantile":0.1,"q1":25.3,"q2":65.8},
  {"sample1":45.8,"sample2":34.9,"quantile":0.2,"q1":42.7,"q2":38.4},
  {"sample1":67.1,"sample2":89.4,"quantile":0.3,"q1":58.9,"q2":87.2},
  {"sample1":12.9,"sample2":45.6,"quantile":0.4,"q1":18.6,"q2":48.3},
  {"sample1":78.3,"sample2":23.1,"quantile":0.5,"q1":74.8,"q2":28.7},
  {"sample1":34.7,"sample2":78.9,"quantile":0.6,"q1":38.2,"q2":76.4},
  {"sample1":56.2,"sample2":56.7,"quantile":0.7,"q1":52.9,"q2":59.1},
  {"sample1":89.6,"sample2":12.4,"quantile":0.8,"q1":85.3,"q2":16.8},
  {"sample1":21.4,"sample2":91.8,"quantile":0.9,"q1":24.7,"q2":88.5},
  {"sample1":65.9,"sample2":38.2,"quantile":1,"q1":62.4,"q2":41.6}
];

// Set dimensions
const width = 400;
const height = 400;
const margin = {top: 50, right: 50, bottom: 50, left: 50};

// Create scales
const xScale = d3.scaleLinear()
    .domain(d3.extent(data, d => d.q1))
    .nice()
    .range([margin.left, width - margin.right]);

const yScale = d3.scaleLinear()
    .domain(d3.extent(data, d => d.q2))
    .nice()
    .range([height - margin.bottom, margin.top]);

// Create SVG container
const svg = d3.select('#qq-plot');

// Title
svg.append('text')
    .attr('class', 'title')
    .attr('x', width / 2)
    .attr('y', margin.top / 2)
    .text('Q-Q Plot');

// X Axis
svg.append('g')
    .attr('class', 'axis')
    .attr('transform', `translate(0,${height - margin.bottom})`)
    .call(d3.axisBottom(xScale));

// X Axis label
svg.append('text')
    .attr('x', (margin.left + width - margin.right) / 2)
    .attr('y', height - 10)
    .attr('text-anchor', 'middle')
    .text('Q1 (Sample 1)');

// Y Axis
svg.append('g')
    .attr('class', 'axis')
    .attr('transform', `translate(${margin.left},0)`)
    .call(d3.axisLeft(yScale));

// Y Axis label
svg.append('text')
    .attr('transform', `rotate(-90)`)
    .attr('x', - (margin.top + height - margin.bottom) / 2)
    .attr('y', 15)
    .attr('text-anchor', 'middle')
    .text('Q2 (Sample 2)');

// Plot points
svg.append('g')
    .selectAll('circle')
    .data(data)
    .enter()
    .append('circle')
    .attr('cx', d => xScale(d.q1))
    .attr('cy', d => yScale(d.q2))
    .attr('r', 3) // size from config (value:3)
    .attr('fill', 'steelblue');
</script>
</body>
</html>