<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Heatmap</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body { font-family: sans-serif; }
  .axis line, .axis path { stroke: #555; }
  .axis text { font-size: 12px; }
</style>
</head>
<body>
<h2>Heatmap</h2>
<svg id="heatmap" width="500" height="500"></svg>
<script>
// Inline data
const data = [
  {"x":0,"y":0,"value":23.5},
  {"x":1,"y":0,"value":45.8},
  {"x":2,"y":0,"value":67.1},
  {"x":0,"y":1,"value":12.9},
  {"x":1,"y":1,"value":78.3},
  {"x":2,"y":1,"value":34.7},
  {"x":0,"y":2,"value":56.2},
  {"x":1,"y":2,"value":89.6},
  {"x":2,"y":2,"value":21.4},
  {"x":0,"y":3,"value":65.9}
];

// Extract unique x and y values (ordinal)
const xVals = Array.from(new Set(data.map(d => d.x))).sort((a,b)=>a-b);
const yVals = Array.from(new Set(data.map(d => d.y))).sort((a,b)=>a-b);

// Dimensions
const width = 500;
const height = 500;
const margin = {top: 50, right: 50, bottom: 50, left: 50};

// Scales
const xScale = d3.scaleBand()
    .domain(xVals)
    .range([margin.left, width - margin.right])
    .padding(0.05);

const yScale = d3.scaleBand()
    .domain(yVals)
    .range([margin.top, height - margin.bottom])
    .padding(0.05);

// Color scale (sequential Viridis)
const values = data.map(d => d.value);
const colorScale = d3.scaleSequential()
    .domain(d3.extent(values))
    .interpolator(d3.interpolateViridis);

// Create SVG container
const svg = d3.select('#heatmap');

// Draw cells
svg.selectAll('rect')
    .data(data)
    .enter()
    .append('rect')
    .attr('x', d => xScale(d.x))
    .attr('y', d => yScale(d.y))
    .attr('width', xScale.bandwidth())
    .attr('height', yScale.bandwidth())
    .attr('fill', d => colorScale(d.value))
    .attr('stroke', '#fff');

// X Axis
const xAxis = d3.axisBottom(xScale).tickSize(0);
svg.append('g')
    .attr('class', 'axis')
    .attr('transform', `translate(0,${height - margin.bottom})`)
    .call(xAxis);

// Y Axis
const yAxis = d3.axisLeft(yScale).tickSize(0);
svg.append('g')
    .attr('class', 'axis')
    .attr('transform', `translate(${margin.left},0)`)
    .call(yAxis);
</script>
</body>
</html>