<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gantt Chart</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body { font-family: sans-serif; }
  .axis path,
  .axis line {
    stroke: #000;
  }
</style>
</head>
<body>
<svg id="gantt" width="800" height="300"></svg>
<script>
// Configuration (as provided)
const config = {
  "id": "gantt",
  "title": "Gantt Chart",
  "data": {
    "source": {
      "type": "inline",
      "data": [
        { "task": "Task 1", "start": "2022-12-31T18:30:00.000Z", "end": "2023-01-14T18:30:00.000Z", "progress": 100, "category": "Phase 1" },
        { "task": "Task 2", "start": "2023-01-09T18:30:00.000Z", "end": "2023-02-04T18:30:00.000Z", "progress": 75, "category": "Phase 1" },
        { "task": "Task 3", "start": "2023-01-31T18:30:00.000Z", "end": "2023-02-28T18:30:00.000Z", "progress": 50, "category": "Phase 2" },
        { "task": "Task 4", "start": "2023-02-14T18:30:00.000Z", "end": "2023-03-14T18:30:00.000Z", "progress": 25, "category": "Phase 2" },
        { "task": "Task 5", "start": "2023-02-28T18:30:00.000Z", "end": "2023-03-31T18:30:00.000Z", "progress": 0, "category": "Phase 3" }
      ]
    },
    "fields": [
      { "name": "task", "type": "nominal", "accessor": "task" },
      { "name": "start", "type": "temporal", "accessor": "start" },
      { "name": "end", "type": "temporal", "accessor": "end" },
      { "name": "progress", "type": "quantitative", "accessor": "progress" },
      { "name": "category", "type": "nominal", "accessor": "category" }
    ]
  },
  "space": { "width": 800, "height": 300 },
  "scales": {
    "x": { "type": "time", "range": [50, 750] },
    "y": {
      "type": "band",
      "domainFrom": { "data": "main", "field": "task", "method": "values" },
      "range": [50, 250],
      "params": { "padding": 0.1 }
    },
    "color": { "type": "ordinal", "scheme": "Set2" }
  },
  "layers": [
    {
      "id": "bars",
      "mark": { "type": "rect" },
      "encoding": {
        "x": { "field": "start", "scale": "x" },
        "y": { "field": "task", "scale": "y" },
        "width": {
          "field": "end",
          "transform": [{ "type": "offset", "params": { "offset": "start", "operation": "subtract" } }]
        },
        "height": { "value": 20 },
        "fill": { "field": "category", "scale": "color" },
        "opacity": { "value": 0.8 }
      }
    }
  ]
};

// Inline data
const data = config.data.source.data.map(d => ({
  task: d.task,
  start: new Date(d.start),
  end: new Date(d.end),
  progress: d.progress,
  category: d.category
}));

const svg = d3.select('#' + config.id)
    .attr('width', config.space.width)
    .attr('height', config.space.height);

// Title
svg.append('text')
   .attr('x', config.space.width / 2)
   .attr('y', 20)
   .attr('text-anchor', 'middle')
   .style('font-size', '16px')
   .style('font-weight', 'bold')
   .text(config.title);

// Scales
const xScale = d3.scaleTime()
    .domain(d3.extent([...data.map(d=>d.start), ...data.map(d=>d.end)]))
    .range(config.scales.x.range);

const yScale = d3.scaleBand()
    .domain(data.map(d => d.task))
    .range(config.scales.y.range)
    .padding(config.scales.y.params.padding);

const colorScale = d3.scaleOrdinal()
    .domain([...new Set(data.map(d=>d.category))])
    .range(d3.schemeSet2);

// Axes
const xAxis = d3.axisBottom(xScale).ticks(6);
svg.append('g')
    .attr('transform', `translate(0,${config.scales.y.range[1]})`)
    .call(xAxis);

const yAxis = d3.axisLeft(yScale);
svg.append('g')
    .attr('transform', `translate(${config.scales.x.range[0]},0)`)
    .call(yAxis);

// Bars
svg.append('g')
  .selectAll('rect')
  .data(data)
  .enter()
  .append('rect')
  .attr('x', d => xScale(d.start))
  .attr('y', d => yScale(d.task))
  .attr('width', d => xScale(d.end) - xScale(d.start))
  .attr('height', yScale.bandwidth())
  .attr('fill', d => colorScale(d.category))
  .attr('opacity', 0.8);

</script>
</body>
</html>