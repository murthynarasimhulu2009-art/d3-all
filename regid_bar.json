{
  "id": "ridgeline-bar-plot",
  "title": "Ridgeline Plot with Bars",
  "data": {
    "source": {
      "type": "inline",
      "data": [
        { "group": "Group A", "x": 0, "density": 0.01 },
        { "group": "Group A", "x": 5, "density": 0.03 },
        { "group": "Group A", "x": 10, "density": 0.07 },
        { "group": "Group B", "x": 0, "density": 0.02 },
        { "group": "Group B", "x": 5, "density": 0.05 },
        { "group": "Group B", "x": 10, "density": 0.10 },
        { "group": "Group C", "x": 0, "density": 0.015 },
        { "group": "Group C", "x": 5, "density": 0.04 },
        { "group": "Group C", "x": 10, "density": 0.09 },
        { "group": "Group D", "x": 0, "density": 0.025 },
        { "group": "Group D", "x": 5, "density": 0.055 },
        { "group": "Group D", "x": 10, "density": 0.12 }
      ]
    },
    "fields": [
      { "name": "group", "type": "nominal", "accessor": "group" },
      { "name": "x", "type": "quantitative", "accessor": "x" },
      { "name": "density", "type": "quantitative", "accessor": "density" }
    ]
  },
  "space": { "width": 800, "height": 500 },
  "scales": {
    "x": {
      "type": "linear",
      "domainFrom": { "data": "source", "field": "x", "method": "extent" },
      "range": [50, 750]
    },
    "yGroup": {
      "type": "point",
      "domainFrom": { "data": "source", "field": "group" },
      "range": [450, 50],
      "padding": 1
    },
    "yDensity": {
      "type": "linear",
      "domainFrom": { "data": "source", "field": "density", "method": "max" },
      "range": [0, 40]
    },
    "color": {
      "type": "ordinal",
      "scheme": "Category10",
      "domainFrom": { "data": "source", "field": "group" }
    }
  },
  "layers": [
    {
      "id": "bars",
      "mark": {
        "type": "bar",
        "width": 5
      },
      "encoding": {
        "x": { "field": "x", "scale": "x" },
        "y": {
          "expr": "yGroup(group) - yDensity(density)"
        },
        "y2": {
          "expr": "yGroup(group)"
        },
        "fill": { "field": "group", "scale": "color" },
        "opacity": 0.7
      }
    },
    {
      "id": "y-axis",
      "mark": { "type": "axis", "orient": "left" },
      "encoding": {
        "position": { "scale": "yGroup", "field": "group" }
      }
    },
    {
      "id": "x-axis",
      "mark": { "type": "axis", "orient": "bottom" },
      "encoding": {
        "position": { "scale": "x" }
      }
    }
  ],
  "annotations": [
    {
      "type": "text",
      "text": "Value",
      "x": 400,
      "y": 490,
      "textAnchor": "middle"
    },
    {
      "type": "text",
      "text": "Group",
      "x": 15,
      "y": 250,
      "rotation": -90,
      "textAnchor": "middle"
    }
  ]
}
