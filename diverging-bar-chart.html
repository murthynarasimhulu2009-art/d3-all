<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Diverging Bar Chart</title>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<style>
  body { font-family: sans-serif; }
  .axis path, .axis line { stroke: #888; }
  .title { font-size: 18px; text-anchor: middle; }
</style>
</head>
<body>
<svg id="diverging-bar-chart" width="800" height="400"></svg>
<script>
const width = 800, height = 400;
const margin = {top: 50, right: 50, bottom: 50, left: 50};

const svg = d3.select('#diverging-bar-chart')
    .attr('width', width)
    .attr('height', height);

// Title
svg.append('text')
  .attr('class', 'title')
  .attr('x', width / 2)
  .attr('y', margin.top / 2)
  .text('Diverging Bar Chart');

// Inline data
const data = [
  {category: 'Item A', value: 15},
  {category: 'Item B', value: -25},
  {category: 'Item C', value: 35},
  {category: 'Item D', value: -10},
  {category: 'Item E', value: 20},
  {category: 'Item F', value: -30}
];

// Scales
const x = d3.scaleLinear()
    .domain(d3.extent(data, d => d.value))
    .range([50, 750]);

const y = d3.scaleBand()
    .domain(data.map(d => d.category))
    .range([50, 350])
    .padding(0.1);

// Color scale: negative red, positive green
const color = d3.scaleThreshold()
    .domain([0])
    .range(['#d73027', '#1a9850']);

const baselineX = x(0);

// Axes
const xAxis = d3.axisBottom(x)
    .ticks(5)
    .tickSizeOuter(0);

svg.append('g')
    .attr('class', 'axis x')
    .attr('transform', `translate(0,${350})`)
    .call(xAxis);

const yAxis = d3.axisLeft(y)
    .tickSizeOuter(0);

svg.append('g')
    .attr('class', 'axis y')
    .attr('transform', `translate(${margin.left},0)`)
    .call(yAxis);

// Bars
svg.selectAll('rect')
    .data(data)
    .enter()
    .append('rect')
    .attr('y', d => y(d.category))
    .attr('height', y.bandwidth())
    .attr('x', d => d.value >= 0 ? baselineX : x(d.value))
    .attr('width', d => Math.abs(x(d.value) - baselineX))
    .attr('fill', d => color(d.value));
</script>
</body>
</html>